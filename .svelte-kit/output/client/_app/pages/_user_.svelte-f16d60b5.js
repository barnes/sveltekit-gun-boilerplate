import{S as O,i as j,s as P,e as $,t as d,c as y,a as E,g as T,d as m,b as I,f as c,H as v,K as g,I as B,k as w,n as N,J as A,L as J,l as L,N as G,A as V,O as W,P as Y,Q as R,h as H,j as C,m as D,o as M,x as S,u as X,v as q,R as Z}from"../chunks/vendor-c1c2ee31.js";import{u as U,a as K,g as x}from"../chunks/user-8bdbed10.js";import"../chunks/singletons-12a22614.js";function tt(l){let t,n,s,f;return{c(){t=$("button"),n=d("Logout"),this.h()},l(a){t=y(a,"BUTTON",{class:!0});var i=E(t);n=T(i,"Logout"),i.forEach(m),this.h()},h(){I(t,"class","logout")},m(a,i){c(a,t,i),v(t,n),s||(f=g(t,"click",l[0]),s=!0)},p:B,i:B,o:B,d(a){a&&m(t),s=!1,f()}}}function et(l){function t(){U.leave(),K.set(""),x("/login")}return[t]}class st extends O{constructor(t){super();j(this,t,et,tt,P,{})}}function lt(l){let t,n,s,f,a,i;return{c(){t=$("input"),n=w(),s=$("button"),f=d("Add"),this.h()},l(u){t=y(u,"INPUT",{type:!0}),n=N(u),s=y(u,"BUTTON",{});var r=E(s);f=T(r,"Add"),r.forEach(m),this.h()},h(){I(t,"type","text")},m(u,r){c(u,t,r),A(t,l[0]),c(u,n,r),c(u,s,r),v(s,f),a||(i=[g(t,"input",l[2]),g(s,"click",l[1])],a=!0)},p(u,[r]){r&1&&t.value!==u[0]&&A(t,u[0])},i:B,o:B,d(u){u&&m(t),u&&m(n),u&&m(s),a=!1,J(i)}}}function nt(l,t,n){let s;async function f(){await U.get("tasks").set(s),n(0,s="")}function a(){s=this.value,n(0,s)}return[s,f,a]}class it extends O{constructor(t){super();j(this,t,nt,lt,P,{})}}function Q(l,t,n){const s=l.slice();return s[7]=t[n],s[9]=n,s}function ut(l){let t,n=l[7].id+"",s,f,a=l[7].data+"",i,u,r=l[7].edit+"",o,e,p;return{c(){t=$("p"),s=d(n),f=d(" : "),i=d(a),u=d(" : "),o=d(r),this.h()},l(b){t=y(b,"P",{style:!0});var k=E(t);s=T(k,n),f=T(k," : "),i=T(k,a),u=T(k," : "),o=T(k,r),k.forEach(m),this.h()},h(){Y(t,"cursor","pointer")},m(b,k){c(b,t,k),v(t,s),v(t,f),v(t,i),v(t,u),v(t,o),e||(p=g(t,"click",function(){R(l[3](l[9]))&&l[3](l[9]).apply(this,arguments)}),e=!0)},p(b,k){l=b,k&1&&n!==(n=l[7].id+"")&&H(s,n),k&1&&a!==(a=l[7].data+"")&&H(i,a),k&1&&r!==(r=l[7].edit+"")&&H(o,r)},d(b){b&&m(t),e=!1,p()}}}function ft(l){let t,n,s,f,a,i,u,r,o,e,p,b,k;return{c(){t=$("input"),n=w(),s=$("button"),f=d("X"),a=w(),i=$("button"),u=d("save"),r=w(),o=$("br"),e=w(),p=$("br"),this.h()},l(_){t=y(_,"INPUT",{type:!0}),n=N(_),s=y(_,"BUTTON",{});var h=E(s);f=T(h,"X"),h.forEach(m),a=N(_),i=y(_,"BUTTON",{});var F=E(i);u=T(F,"save"),F.forEach(m),r=N(_),o=y(_,"BR",{}),e=N(_),p=y(_,"BR",{}),this.h()},h(){I(t,"type","text")},m(_,h){c(_,t,h),A(t,l[1]),c(_,n,h),c(_,s,h),v(s,f),c(_,a,h),c(_,i,h),v(i,u),c(_,r,h),c(_,o,h),c(_,e,h),c(_,p,h),b||(k=[g(t,"input",l[5]),g(s,"click",function(){R(l[2](l[9]))&&l[2](l[9]).apply(this,arguments)}),g(i,"click",function(){R(l[4](l[9]))&&l[4](l[9]).apply(this,arguments)})],b=!0)},p(_,h){l=_,h&2&&t.value!==l[1]&&A(t,l[1])},d(_){_&&m(t),_&&m(n),_&&m(s),_&&m(a),_&&m(i),_&&m(r),_&&m(o),_&&m(e),_&&m(p),b=!1,J(k)}}}function z(l,t){let n,s;function f(u,r){return u[7].edit?ft:ut}let a=f(t),i=a(t);return{key:l,first:null,c(){n=L(),i.c(),s=L(),this.h()},l(u){n=L(),i.l(u),s=L(),this.h()},h(){this.first=n},m(u,r){c(u,n,r),i.m(u,r),c(u,s,r)},p(u,r){t=u,a===(a=f(t))&&i?i.p(t,r):(i.d(1),i=a(t),i&&(i.c(),i.m(s.parentNode,s)))},d(u){u&&m(n),i.d(u),u&&m(s)}}}function ot(l){let t,n,s,f=[],a=new Map,i,u=l[0];const r=o=>o[7].id;for(let o=0;o<u.length;o+=1){let e=Q(l,u,o),p=r(e);a.set(p,f[o]=z(p,e))}return{c(){t=$("h1"),n=d("TaskList"),s=w();for(let o=0;o<f.length;o+=1)f[o].c();i=L()},l(o){t=y(o,"H1",{});var e=E(t);n=T(e,"TaskList"),e.forEach(m),s=N(o);for(let p=0;p<f.length;p+=1)f[p].l(o);i=L()},m(o,e){c(o,t,e),v(t,n),c(o,s,e);for(let p=0;p<f.length;p+=1)f[p].m(o,e);c(o,i,e)},p(o,[e]){e&31&&(u=o[0],f=G(f,e,r,1,o,u,a,i.parentNode,W,z,i,Q))},i:B,o:B,d(o){o&&m(t),o&&m(s);for(let e=0;e<f.length;e+=1)f[e].d(o);o&&m(i)}}}function at(l,t,n){let s=[],f="";function a(){n(0,s=[]),U.get("tasks").map().once(async(e,p)=>{if(e){let b={id:p,data:e,edit:!1};n(0,s=[...s,b])}})}V(()=>{a()});async function i(e){await U.get("tasks").get(s[e].id).put(null),a()}function u(e){console.log("toggleEdit"),n(0,s[e].edit=!s[e].edit,s),n(1,f=s[e].data)}async function r(e){console.log(f),await U.get("tasks").get(s[e].id).put(f),n(0,s[e].edit=!1,s),a()}function o(){f=this.value,n(1,f)}return[s,f,i,u,r,o]}class rt extends O{constructor(t){super();j(this,t,at,ot,P,{})}}function pt(l){let t,n,s,f,a,i,u,r,o;return t=new st({}),i=new it({}),r=new rt({}),{c(){C(t.$$.fragment),n=w(),s=$("h1"),f=d(l[0]),a=w(),C(i.$$.fragment),u=w(),C(r.$$.fragment)},l(e){D(t.$$.fragment,e),n=N(e),s=y(e,"H1",{});var p=E(s);f=T(p,l[0]),p.forEach(m),a=N(e),D(i.$$.fragment,e),u=N(e),D(r.$$.fragment,e)},m(e,p){M(t,e,p),c(e,n,p),c(e,s,p),v(s,f),c(e,a,p),M(i,e,p),c(e,u,p),M(r,e,p),o=!0},p(e,[p]){(!o||p&1)&&H(f,e[0])},i(e){o||(S(t.$$.fragment,e),S(i.$$.fragment,e),S(r.$$.fragment,e),o=!0)},o(e){X(t.$$.fragment,e),X(i.$$.fragment,e),X(r.$$.fragment,e),o=!1},d(e){q(t,e),e&&m(n),e&&m(s),e&&m(a),q(i,e),e&&m(u),q(r,e)}}}function _t(l,t,n){let s;return Z(l,K,f=>n(0,s=f)),[s]}class ht extends O{constructor(t){super();j(this,t,_t,pt,P,{})}}export{ht as default};
